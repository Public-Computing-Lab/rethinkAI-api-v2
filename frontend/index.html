<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dorchester Community Assistant</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;1,9..40,400&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <span class="logo-icon">‚óà</span>
                    <span class="logo-text">Dorchester<br>Assistant</span>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <button class="nav-item active" data-view="chat">
                    <span class="nav-icon">üí¨</span>
                    <span class="nav-label">Chat</span>
                </button>
                <button class="nav-item" data-view="events">
                    <span class="nav-icon">üìÖ</span>
                    <span class="nav-label">Events</span>
                </button>
                <button class="nav-item" data-view="api-test">
                    <span class="nav-icon">üîß</span>
                    <span class="nav-label">API Tester</span>
                </button>
            </nav>
            
            <div class="sidebar-footer">
                <div class="api-status" id="api-status">
                    <span class="status-dot"></span>
                    <span class="status-text">Checking...</span>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Chat View -->
            <section class="view chat-view active" id="chat-view">
                <header class="view-header">
                    <h1>Community Chat</h1>
                    <p>Ask questions about Dorchester - events, safety, services, and more</p>
                </header>
                
                <div class="chat-container">
                    <div class="chat-messages" id="chat-messages">
                        <div class="message assistant">
                            <div class="message-avatar">ü§ñ</div>
                            <div class="message-content">
                                <p>Hello! I'm your Dorchester Community Assistant. I can help you with:</p>
                                <ul>
                                    <li>üìÖ Community events and activities</li>
                                    <li>üìä 311 service requests and city data</li>
                                    <li>üèòÔ∏è Neighborhood information and policies</li>
                                    <li>üì∞ Local news and newsletters</li>
                                </ul>
                                <p>What would you like to know?</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="chat-input-container">
                        <form id="chat-form" class="chat-form">
                            <input 
                                type="text" 
                                id="chat-input" 
                                placeholder="Ask about events, safety, services..." 
                                autocomplete="off"
                            >
                            <button type="submit" id="send-btn">
                                <span class="btn-text">Send</span>
                                <span class="btn-icon">‚Üí</span>
                            </button>
                        </form>
                        <div class="chat-hints">
                            <button class="hint-chip" data-query="What events are happening this week?">Events this week</button>
                            <button class="hint-chip" data-query="How many 311 requests were filed last month?">311 requests</button>
                            <button class="hint-chip" data-query="What are the safety concerns in Dorchester?">Safety info</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Events View -->
            <section class="view events-view" id="events-view">
                <header class="view-header">
                    <h1>Upcoming Events</h1>
                    <p>Community events and activities in Dorchester</p>
                </header>
                
                <div class="events-controls">
                    <div class="control-group">
                        <label for="days-ahead">Days ahead:</label>
                        <select id="days-ahead">
                            <option value="7">7 days</option>
                            <option value="14" selected>14 days</option>
                            <option value="30">30 days</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label for="event-limit">Show:</label>
                        <select id="event-limit">
                            <option value="5">5 events</option>
                            <option value="10" selected>10 events</option>
                            <option value="20">20 events</option>
                        </select>
                    </div>
                    <button id="refresh-events" class="btn-secondary">Refresh</button>
                </div>
                
                <div class="events-grid" id="events-grid">
                    <div class="loading-state">Loading events...</div>
                </div>
            </section>

            <!-- API Tester View -->
            <section class="view api-test-view" id="api-test-view">
                <header class="view-header">
                    <h1>API Tester</h1>
                    <p>Test API endpoints directly</p>
                </header>
                
                <div class="api-tester">
                    <div class="endpoint-selector">
                        <label for="endpoint-select">Endpoint:</label>
                        <select id="endpoint-select">
                            <option value="health">GET /health</option>
                            <option value="events">GET /events</option>
                            <option value="chat">POST /chat</option>
                            <option value="log-post">POST /log</option>
                            <option value="log-put">PUT /log</option>
                        </select>
                    </div>
                    
                    <div class="request-body-container" id="request-body-container">
                        <label for="request-body">Request Body (JSON):</label>
                        <textarea id="request-body" rows="8" placeholder='{"message": "Hello"}'></textarea>
                    </div>
                    
                    <div class="query-params-container" id="query-params-container">
                        <label>Query Parameters:</label>
                        <div class="param-inputs">
                            <input type="text" id="param-limit" placeholder="limit (e.g., 10)">
                            <input type="text" id="param-days" placeholder="days_ahead (e.g., 7)">
                        </div>
                    </div>
                    
                    <button id="send-request" class="btn-primary">Send Request</button>
                    
                    <div class="response-container">
                        <div class="response-header">
                            <span>Response</span>
                            <span id="response-status" class="response-status"></span>
                        </div>
                        <pre id="response-body" class="response-body">// Response will appear here</pre>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="app.js"></script>
</body>
</html>

